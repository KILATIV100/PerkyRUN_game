# ü§ñ PerkUP Runner

Telegram Mini App –≥—Ä–∞ –≤ —Å—Ç–∏–ª—ñ endless runner –¥–ª—è –∫–∞—Ñ–µ PerkUP –≤ –ë—Ä–æ–≤–∞—Ä–∞—Ö.

## üéÆ –ü—Ä–æ –≥—Ä—É

- üèÉ –ë—ñ–≥–∞–π –≤—É–ª–∏—Ü—è–º–∏ –ë—Ä–æ–≤–∞—Ä—ñ–≤
- ‚òï –ó–±–∏—Ä–∞–π –∫–∞–≤–æ–≤—ñ –∑–µ—Ä–Ω–∞
- ü™ô –ó–∞—Ä–æ–±–ª—è–π –º–æ–Ω–µ—Ç–∏
- üéÅ –û—Ç—Ä–∏–º—É–π –∑–Ω–∏–∂–∫–∏ –≤ PerkUP –∫–∞—Ñ–µ!

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Frontend**: Vanilla JavaScript, HTML5, CSS3
- **Backend**: Node.js, Express
- **Database**: PostgreSQL
- **Bot**: node-telegram-bot-api
- **Hosting**: Railway

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
PerkyRUN_game/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îú‚îÄ‚îÄ config/         # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (–ë–î, env)
‚îÇ       ‚îú‚îÄ‚îÄ controllers/    # –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ API
‚îÇ       ‚îú‚îÄ‚îÄ models/         # –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö
‚îÇ       ‚îú‚îÄ‚îÄ routes/         # –ú–∞—Ä—à—Ä—É—Ç–∏ API
‚îÇ       ‚îú‚îÄ‚îÄ middleware/     # Middleware
‚îÇ       ‚îú‚îÄ‚îÄ utils/          # –£—Ç–∏–ª—ñ—Ç–∏, –º—ñ–≥—Ä–∞—Ü—ñ—ó
‚îÇ       ‚îú‚îÄ‚îÄ server.js       # Express —Å–µ—Ä–≤–µ—Ä
‚îÇ       ‚îî‚îÄ‚îÄ bot.js          # Telegram –±–æ—Ç
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îî‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ .env.example
‚îî‚îÄ‚îÄ README.md
```

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Railway

### 1. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –∞–∫–∞—É–Ω—Ç –Ω–∞ [Railway](https://railway.app)
2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Railway CLI (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ):
   ```bash
   npm install -g @railway/cli
   ```

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—î–∫—Ç—É –Ω–∞ Railway

#### –ß–µ—Ä–µ–∑ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

1. –£–≤—ñ–π–¥—ñ—Ç—å –≤ Railway
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "New Project"
3. –í–∏–±–µ—Ä—ñ—Ç—å "Deploy from GitHub repo"
4. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ GitHub —Ç–∞ –≤–∏–±–µ—Ä—ñ—Ç—å –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
5. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç—å Node.js –ø—Ä–æ—î–∫—Ç

#### –ß–µ—Ä–µ–∑ CLI:

```bash
railway login
railway init
railway up
```

### 3. –î–æ–¥–∞–≤–∞–Ω–Ω—è PostgreSQL –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

1. –í Railway –ø—Ä–æ—î–∫—Ç—ñ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "+ New"
2. –í–∏–±–µ—Ä—ñ—Ç—å "Database" ‚Üí "PostgreSQL"
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç—å –∑–º—ñ–Ω–Ω—É `DATABASE_URL`

### 4. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è

–í Railway –¥–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∑–º—ñ–Ω–Ω—ñ (Settings ‚Üí Variables):

```env
# Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—Å—Ç—å:
DATABASE_URL=postgresql://...

# –í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏:
NODE_ENV=production
PORT=3000
TELEGRAM_BOT_TOKEN=your_bot_token_from_botfather
TELEGRAM_WEBAPP_URL=https://your-app.railway.app
JWT_SECRET=your_random_secret_key
ALLOWED_ORIGINS=https://web.telegram.org
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
```

### 5. –ú—ñ–≥—Ä–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

–ü—ñ—Å–ª—è –¥–µ–ø–ª–æ—é –≤–∏–∫–æ–Ω–∞–π—Ç–µ –º—ñ–≥—Ä–∞—Ü—ñ—é:

```bash
# –ß–µ—Ä–µ–∑ Railway CLI
railway run npm run db:migrate

# –ê–±–æ —á–µ—Ä–µ–∑ Railway Dashboard
# Settings ‚Üí Deployments ‚Üí Three dots ‚Üí Run command
# –ö–æ–º–∞–Ω–¥–∞: npm run db:migrate
```

### 6. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ (–æ–∫—Ä–µ–º–∏–π —Å–µ—Ä–≤—ñ—Å)

–î–ª—è –±–æ—Ç–∞ —Å—Ç–≤–æ—Ä—ñ—Ç—å –æ–∫—Ä–µ–º–∏–π —Å–µ—Ä–≤—ñ—Å –≤ Railway:

1. "+ New" ‚Üí "Empty Service"
2. –ù–∞–∑–≤—ñ—Ç—å –π–æ–≥–æ "Bot"
3. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å —Ç–æ–π —Å–∞–º–∏–π GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
4. –í Settings ‚Üí Start Command –≤–∫–∞–∂—ñ—Ç—å: `npm run bot`
5. –î–æ–¥–∞–π—Ç–µ —Ç—ñ —Å–∞–º—ñ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è

### 7. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Telegram –±–æ—Ç–∞

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –í—ñ–¥–ø—Ä–∞–≤—Ç–µ `/newbot`
3. –í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É —Ç–∞ username –±–æ—Ç–∞
4. –°–∫–æ–ø—ñ—é–π—Ç–µ —Ç–æ–∫–µ–Ω —Ç–∞ –¥–æ–¥–∞–π—Ç–µ –≤ –∑–º—ñ–Ω–Ω—ñ Railway —è–∫ `TELEGRAM_BOT_TOKEN`
5. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –±–æ—Ç–∞:
   ```
   /setdescription - PerkUP Runner - –±—ñ–∂–∏ —Ç–∞ –∑–±–∏—Ä–∞–π –∫–∞–≤–æ–≤—ñ –∑–µ—Ä–Ω–∞!
   /setabouttext - –û—Ñ—ñ—Ü—ñ–π–Ω–∞ –≥—Ä–∞ PerkUP –∫–∞—Ñ–µ –≤ –ë—Ä–æ–≤–∞—Ä—è—Ö
   /setcommands - start - –ü–æ—á–∞—Ç–∏ –≥—Ä—É
stats - –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
leaderboard - –¢–∞–±–ª–∏—Ü—è –ª—ñ–¥–µ—Ä—ñ–≤
help - –î–æ–ø–æ–º–æ–≥–∞
   ```

### 8. –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è WebApp –¥–æ –±–æ—Ç–∞

1. –í [@BotFather](https://t.me/BotFather) –≤–∏–±–µ—Ä—ñ—Ç—å –≤–∞—à–æ–≥–æ –±–æ—Ç–∞
2. –í—ñ–¥–ø—Ä–∞–≤—Ç–µ `/newapp`
3. –í–∏–±–µ—Ä—ñ—Ç—å –±–æ—Ç–∞
4. –í–≤–µ–¥—ñ—Ç—å:
   - Title: `PerkUP Runner`
   - Description: `–ë—ñ–≥–∞–π –≤—É–ª–∏—Ü—è–º–∏ –ë—Ä–æ–≤–∞—Ä—ñ–≤ —Ç–∞ –∑–±–∏—Ä–∞–π –∫–∞–≤–æ–≤—ñ –∑–µ—Ä–Ω–∞!`
   - Photo: –∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —ñ–∫–æ–Ω–∫—É 640x360px
   - Demo GIF: –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ
   - Web App URL: `https://your-app.railway.app`

## üíª –õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
npm install
```

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è .env

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤—ñ `.env.example`:

```bash
cp .env.example .env
```

–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–º—ñ–Ω–Ω—ñ.

### 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–æ—ó –ë–î

```bash
# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å PostgreSQL
# –°—Ç–≤–æ—Ä—ñ—Ç—å –±–∞–∑—É –¥–∞–Ω–∏—Ö
createdb perkup_runner

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å –º—ñ–≥—Ä–∞—Ü—ñ—é
npm run db:migrate
```

### 4. –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä
npm run dev

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞ (–≤ —ñ–Ω—à–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ)
npm run dev:bot
```

## üì° API Endpoints

### User
- `GET /api/users/:telegramId` - –û—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `PUT /api/users/:telegramId` - –û–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å
- `POST /api/users/:telegramId/purchase` - –ö—É–ø–∏—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç
- `GET /api/users/leaderboard/top` - –¢–∞–±–ª–∏—Ü—è –ª—ñ–¥–µ—Ä—ñ–≤

### Game
- `POST /api/game/:telegramId/submit` - –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥—Ä–∏
- `GET /api/game/:telegramId/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `GET /api/game/top` - –¢–æ–ø —ñ–≥–æ—Ä

### Auth
- `POST /api/auth/telegram` - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ Telegram

### Health
- `GET /api/health` - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É —Å–µ—Ä–≤–µ—Ä–∞

## ü§ñ –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞

- `/start` - –ü–æ—á–∞—Ç–∏ –≥—Ä—É
- `/stats` - –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- `/leaderboard` - –¢–∞–±–ª–∏—Ü—è –ª—ñ–¥–µ—Ä—ñ–≤
- `/help` - –î–æ–ø–æ–º–æ–≥–∞

## üìä –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

### –¢–∞–±–ª–∏—Ü—ñ:
- `users` - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
- `user_items` - –ö—É–ø–ª–µ–Ω—ñ –ø—Ä–µ–¥–º–µ—Ç–∏
- `game_sessions` - –Ü—Å—Ç–æ—Ä—ñ—è —ñ–≥–æ—Ä
- `achievements` - –î–æ—Å—è–≥–Ω–µ–Ω–Ω—è
- `user_achievements` - –î–æ—Å—è–≥–Ω–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- `daily_challenges` - –©–æ–¥–µ–Ω–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è
- `user_challenges` - –ü—Ä–æ–≥—Ä–µ—Å –∑–∞–≤–¥–∞–Ω—å
- `referrals` - –†–µ—Ñ–µ—Ä–∞–ª–∏
- `transactions` - –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó

## üîí –ë–µ–∑–ø–µ–∫–∞

- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è Telegram WebApp –¥–∞–Ω–∏—Ö
- ‚úÖ Rate limiting –Ω–∞ API
- ‚úÖ Helmet –¥–ª—è –±–µ–∑–ø–µ–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤
- ‚úÖ CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- ‚úÖ SQL injection –∑–∞—Ö–∏—Å—Ç (parametrized queries)
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è —ñ–≥—Ä–æ–≤–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

## üìù TODO

- [ ] –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—è–≥–Ω–µ–Ω—å
- [ ] –©–æ–¥–µ–Ω–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è
- [ ] –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞
- [ ] Power-ups –≤ –≥—Ä—ñ
- [ ] –†—ñ–∑–Ω—ñ –ª–æ–∫–∞—Ü—ñ—ó
- [ ] Telegram Stars —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
- [ ] –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞
- [ ] A/B —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

## üêõ –í—ñ–¥–æ–º—ñ –ø—Ä–æ–±–ª–µ–º–∏

–í—ñ–¥—Å—É—Ç–Ω—ñ

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT

## üë• –ê–≤—Ç–æ—Ä–∏

–í–∞—à–µ —ñ–º'—è

## üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏

- Telegram: @your_username
- Email: your@email.com

---

Made with ‚òï for PerkUP Brovary
